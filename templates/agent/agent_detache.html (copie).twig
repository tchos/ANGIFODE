{% extends 'base.html.twig' %}

{% block title %}Nouveau détachement{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('asset/css/jquery-ui.css') }}" />
    <link rel="stylesheet" href="{{ asset('asset/php/auto_complete_tabul/ajax.css') }}" />
    <link rel="stylesheet" href="{{ asset('asset/css/angifode.css') }}"/>
{% endblock %}

{% block body %}
    <div class="container">
        <div class="h4 text-success">Saisie d'un nouveau détachement</div>
        {% for message in app.session.flashBag.get('success') %}
            <div class="alert alert-success">{{ message }}</div>
        {% endfor %}
        <hr>
        {{ form_start(form) }}
            <div class="row">
                <div class="col-5 me-3">
                    <fieldset>
                        <legend class="bg-dark text-center text-white">
                            Informations sur l'agent
                        </legend>
                        <hr>
                        <div class="row mb-3">
                            <div class="col-4">{{ form_row(form.matricule) }}</div>
                            <div class="col">{{ form_row(form.noms) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-4">{{ form_row(form.dateNaissance) }}</div>
                            <div class="col">{{ form_row(form.telephone) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-4">{{ form_row(form.dateIntegration) }}</div>
                            <div class="col">{{ form_row(form.refActeInt) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-4">{{ form_row(form.dateDernierAvct) }}</div>
                        </div>
                    </fieldset>
                </div>
                <div class="col-6 ms-3">
                    <fieldset>
                        <legend class="bg-dark text-center text-white">Informations sur le détachement</legend>
                        <hr>
                        <div class="row mb-3">
                            <div class="col">{{ form_row(form.typeActeDet) }}</div>
                            <div class="col ">{{ form_row(form.refActeDet) }}</div>
                            <div class="col">{{ form_row(form.dateActeDet) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">{{ form_row(form.ministere) }}</div>
                            <div class="col">{{ form_row(form.gradeDet, {'attr': {'autocomplete': 'on'}}) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">{{ form_row(form.classeDet) }}</div>
                            <div class="col">{{ form_row(form.echelonDet) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">{{ form_row(form.dateDet) }}</div>
                            <div class="col">{{ form_row(form.datePriseService) }}</div>
                            <div class="col">{{ form_row(form.dateSuspension) }}</div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">{{ form_row(form.organisme) }}</div>
                        </div>
                    </fieldset>
                </div>
            </div>
            <button type="submit" class="btn btn-success">
                <i class="fas fa-check"></i>
                <span class="fw-bolder">Créer le détachement</span>
            </button>
            <button type="reset" class="btn btn-dark">
                <i class="fa fa-times-circle" aria-hidden="true"></i>
                <span class="fw-bolder">Annuler le détachement</span>
            </button>
        {{ form_end(form) }}
    </div>
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('asset/js/jquery-3.2.1.min.js') }}"></script>
    <script src="{{ asset('asset/js/jquery-ui.min.js') }}"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#detachement_gradeDet").autocomplete({
                source: '{{ asset('asset/php/search-grade.php') }}',
                minLength: 4,
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#detachement_matricule").autocomplete({
                source: '{{ asset('asset/php/search-matricule.php') }}',
                minLength: 4,
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#detachement_noms").autocomplete({
                source: '{{ asset('asset/php/search-noms.php') }}',
                minLength: 5,
            });
        });
    </script>
{% endblock %}
